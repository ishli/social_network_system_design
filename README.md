# social_network_system_design

System Design социальной сети для курса по System Design
https://balun.courses/courses/system_design


## Требования:

### Функциональные требования

* Поддержка мобильного и веб приложения
* Аутентификация и авторизация
* Просмотр профиля
* Изменение своего профиля
* Публикация постов в ленте профиля
* Добавление комментариев к постам
* Просмотр друзей
* Добавление и удаление друзей
* Просмотр профиля пользователей
* Просмотр статуса пользователя
* Просмотр личной ленты профиля
* Просмотр ленты новостей
* Создание чатов
* Создание приватных чатов (на двоих)
* Добавление и редактирование комментариев в чатах
* Чтение чатов и приватных чатов
* Поиск людей
* Поиск медиа
* Загрузка медиа
* Добавление медиа к постам и комментариям

### Нефункциональные требования

* DAU - 55 кк (брал из https://inclient.ru/vk-stats/)
* Сервис доступен в СНГ только
* Срок хранения сообщений и медиа - 5 лет
* Максимальнео число друзей - 10000
* Максимальное число пользователей в чате - 100
* Средняя длина сообщений - 100 символов (utf-8 4 байта)
* Средний размер медиа - 1 Мб
* Среднее число отправленных сообщений в день - 5 (из  https://inclient.ru/vk-stats/ следует 274 (15 ккк сообщений от пользователей в день), но это не бьется с ограничениями вк в 100 сообщений в день для пользователя)
* Среднее число прочитанных сообщений в день - 20
* Среднее соотношение сообщений к  сообщениями с медиа - 0.1 (10%)
* Время ответа для отправки сообщения - 1 сек
* Время ответа для получения сообщения - 5 сек

### Расчет ресурсов

| DAU 	                                       |                          | 55000000                   |
|                                              |                          |                            |
| RPS на запись                                | 55*10^6*5 / 86400        | 3182                       |
| RPS на чтение                                | 55*10^6*20 / 86400       | 12731                      |
|                                              |                          |                            |
| Траффик сообщений на запись                  | 3182 * 100 * 4           | 1272800 Байт/c = 1.21 МБ/с |
| Траффик сообщений на чтение                  | 12731 * 100 * 4          | 5091200 Байт/c = 4.85 МБ/с |
|                                              |                          |                            |
| Объем данных для хранения сообщений за 5 лет | 1.21 * 86400 * 365,3 * 5 | 190949616 МБ = 182 ТБ      |
| Средний объем HDD                            |                          | 6 ТБ                       |
| HDD для хранения сообщений                   | 182 / 6                  | 31                         |
| С учетом двойной репликации                  | 31 * 3                   | 93 HDD                     |